<app-titulo titulo="Escala Do Semanal" [carregando]="!tudoPronto"></app-titulo>

<p-toast position="center"></p-toast>

<p-card class="nao-imprimir">
    <button type="button" pButton pRipple label="Data"></button>
    <p-calendar [(ngModel)]="data" selectionMode="single" dateFormat="dd/mm/yy" [locale]="locale_pt" showIcon="true"
        [inputStyle]="{'width':'150px'}"></p-calendar>
    <button pButton type="button" icon="pi pi-search" iconPos="right" label="Perquisar" (click)="rodarRelatorio()"
        class="p-ml-2"></button>
</p-card>

<img [src]="urlLogo" [alt]="urlLogo" style="max-height: 50px;">

<div class="card" *ngFor="let data of resposta">
    <p-table [value]="data.Lista" styleClass="p-datatable-sm">
        <ng-template pTemplate="caption">
            Escala Prevista para o dia {{data.Data | date:'dd/MM/yyyy'}}
        </ng-template>
        <ng-template pTemplate="colgroup">
            <colgroup>
                <col style="width:5%">
                <col style="width:5%">
                <col style="width:5%">
                <col style="width:5%">
                <col *ngFor="let coluna of colunas" style="width:15%">
                <col style="width:5%">
                <col style="width:5%">
            </colgroup>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Nome</th>
                <th>Base</th>
                <th>Apres.</th>
                <th>Obs.</th>
                <th *ngFor="let coluna of colunas">&nbsp;</th>
                <th>Limite de Corte</th>
                <th>Limite Jornada</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-crew>
            <tr>
                <td>{{crew.Tripulante.Trato}}</td>
                <td>{{crew.Base}}</td>
                <td>{{crew.Apresentacao | slice:0:5}}</td>
                <td>{{crew.Observacao}}</td>
                <td *ngFor="let evento of crew.Eventos">
                    <span *ngIf="evento.Tipo == 1">
                        PIC: {{evento.PIC.Trato}} / SIC: {{evento.SIC.Trato}}                        
                        <br />
                    </span>
                    {{evento.Descricao}}
                    <span *ngIf="evento.Tipo == 2"><br />In√≠cio: {{evento.Inicio | slice:0:5}} / Fim: {{evento.Fim |
                        slice:0:5}}</span>
                </td>
                <td>{{crew.LimiteDeCorte | slice:0:5}}</td>
                <td>{{crew.LimiteDeJornada | slice:0:5}}</td>
            </tr>
        </ng-template>
    </p-table>
</div>