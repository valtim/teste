<app-titulo titulo="Escala Mensal" [carregando]="!tudoPronto"></app-titulo>

<div class="p-grid p-mt-1">
    <div class="p-col"></div>
    <div class="p-col">
        <button type="button" pButton pRipple label="Inicial"></button>
        <p-calendar [(ngModel)]="dataInicio" selectionMode="single" dateFormat="dd/mm/yy" [locale]="locale_pt"
            showIcon="true"></p-calendar>
    </div>
    <div class="p-col">
        <button type="button" pButton pRipple label="Final" class="p-ml-2"></button>
        <p-calendar [(ngModel)]="dataFim" selectionMode="single" dateFormat="dd/mm/yy" [locale]="locale_pt"
            showIcon="true"></p-calendar>
    </div>
    <div class="p-col">
        <button pButton type="button" icon="pi pi-search" iconPos="right" label="Perquisar" (click)="rodarRelatorio()"
            class="p-ml-2"></button>
    </div>
    <div class="p-col"></div>
</div>


<div class="table-container">

    <table>
        <thead>
            <tr>
                <th *ngFor="let col of colunas" (click)="editarDia($event, col.Value)">{{col.Header}}</th>
            </tr>
        </thead>

        <tfoot>
            <tr>
                <th *ngFor="let col of colunas">
                    {{Balanco[col.Header].Texto}}
                </th>
            </tr>
            <!-- <tr>
                <th *ngFor="let col of colunas">{{col.Header}}</th>
            </tr> -->
        </tfoot>


        <tr *ngFor="let linha of dados">
            <td *ngFor="let col of colunas" (click)="modificarRegistro($event, linha[col.Header].Id)"
                [class]="linha[col.Header].Estilo">
                {{linha[col.Header].Texto}}<span class="p-badge p-badge-danger"
                    *ngIf="linha[col.Header].NumeroDeVencimentos > 0 ">{{linha[col.Header].NumeroDeVencimentos}}</span>
                <span *ngIf="linha[col.Header].Base" class="texto-pequeno"><br />{{linha[col.Header].Base}}</span>
                <span class="p-badge p-badge-warning"
                    *ngIf="linha[col.Header].NumeroDeTreinamentos > 0 ">{{linha[col.Header].NumeroDeTreinamentos}}</span>
            </td>
        </tr>




    </table>

</div>

<ul>
    <li *ngFor="let item of vencimentos">{{item.Curso}}
        <ul>
            <li *ngFor="let data of item.Datas">{{data.ValorExibido}} - {{data.Tripulante.Trato}}</li>
        </ul>
    </li>

</ul>

<!-- [Header]="col.field" -->
<p-dialog Header="Escala do Dia" [(visible)]="ExibirDialogo" [modal]="true" [baseZIndex]="10000" (onHide)="ocultar()">


    <app-editar-composicao *ngFor="let item of Tripulacoes" [Escala]="item" [Tripulantes]="Tripulantes"
        [Clientes]="Clientes" [Bases]="Bases"></app-editar-composicao>

    <app-editar-escala *ngFor="let item of previsoes" [Registro]="item" [TipoDeOcorrencias]="TipoDeOcorrencias"
        (retorno)="retornoEvento($event)"></app-editar-escala>

</p-dialog>