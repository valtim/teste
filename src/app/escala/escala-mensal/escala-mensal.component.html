<app-titulo titulo="Escala Mensal" [carregando]="!tudoPronto"></app-titulo>

<div class="container d-print-none">

    <div class="row ml-1">
        <div class="col-4">

            <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text">Inicial</span>
                </div>
                <p-calendar [(ngModel)]="dataInicio" selectionMode="single" dateFormat="dd/mm/yy" [locale]="locale_pt"
                    showIcon="true"></p-calendar>
            </div>

        </div>

        <div class="col-4">

            <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text">Final</span>
                </div>
                <p-calendar [(ngModel)]="dataFim" selectionMode="single" dateFormat="dd/mm/yy" [locale]="locale_pt"
                    showIcon="true"></p-calendar>
            </div>
        </div>

        <div class="col-4">
            <button pButton type="button" icon="pi pi-search" iconPos="right" label="Perquisar"
                (click)="rodarRelatorio()"></button>
        </div>
    </div>

</div>


<div class="table-container">

    <table>
        <thead>
            <tr>
                <th *ngFor="let col of colunas" (click)="editarDia($event, col.Value)">{{col.Header}}</th>
            </tr>
        </thead>

        <tfoot>
            <tr>
                <th *ngFor="let col of colunas">{{col.Header}}</th>
            </tr>
        </tfoot>


        <tr *ngFor="let linha of dados">
            <td *ngFor="let col of colunas" (click)="modificarRegistro($event, linha[col.Header].Id)"  [ngClass]="linha[col.Header].Realizada ? 'negrito' : ''" [class]="linha[col.Header].Estilo">
                {{linha[col.Header].Texto}} <span *ngIf="linha[col.Header].Base" class="texto-pequeno"><br/>{{linha[col.Header].Base}}</span>
            </td>
        </tr>

        
    </table>

</div>

<ul>
    <li *ngFor="let item of vencimentos">{{item.Curso}}
        <ul>
            <li *ngFor="let data of item.Datas">{{data.ValorExibido}} - {{data.Tripulante.Trato}}</li>
        </ul>
    </li>

</ul>

<!-- [Header]="col.field" -->
<p-dialog Header="Escala do Dia" [(visible)]="ExibirDialogo" [modal]="true" [baseZIndex]="10000" (onHide)="ocultar()">


    <app-editar-composicao *ngFor="let item of Tripulacoes" [Escala]="item" [Tripulantes]="Tripulantes" [Clientes]="Clientes" [Bases]="Bases"></app-editar-composicao>

    <app-editar-escala *ngFor="let item of previsoes" [Registro]="item" [TipoDeOcorrencias]="TipoDeOcorrencias"
        (retorno)="retornoEvento($event)"></app-editar-escala>

</p-dialog>