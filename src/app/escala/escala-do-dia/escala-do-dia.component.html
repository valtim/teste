<app-titulo titulo="Escala Do Dia" [carregando]="!tudoPronto"></app-titulo>


<p-toast position="center"></p-toast>


<p-card>
    <button type="button" pButton pRipple label="Data"></button>
    <p-calendar [(ngModel)]="data" selectionMode="single" dateFormat="dd/mm/yy" [locale]="locale_pt" showIcon="true"
        [inputStyle]="{'width':'150px'}"></p-calendar>
    <button pButton type="button" icon="pi pi-search" iconPos="right" label="Perquisar" (click)="rodarRelatorio()"
        class="p-ml-2"></button>
</p-card>

<p-card *ngFor="let item of relatorio">
<h5>{{item.Name}}</h5>
    <ul>
        <li *ngFor="let evento of item.Events">{{evento.Descricao}} <span *ngIf="evento.Crew.PIC">{{evento.Crew.PIC.Trato}}</span>&nbsp;<span *ngIf="evento.Crew.SIC">{{evento.Crew.SIC.Trato}}</span></li>
    </ul>
</p-card>

<p-card>Escala do dia {{data | date:'dd/MM/yyyy'}}</p-card>

<table>
    <tr>
        <td>Trato</td>
        <td>Base</td>
        <td>Apresentação</td>
        <td>FB</td>
        <td>Dupla</td>
        <td *ngFor="let coluna of colunas">&nbsp;</td>
        <td>Saída</td>
        <td>Limite Corte</td>
        <td>Limite Jornada</td>
    </tr>
    <tr *ngFor="let crew of tripulacoes">
        <td>{{crew.PIC.Trato}}</td>
        <td>{{crew.Base}}</td>
        <td>{{crew.Apresentacao}}</td>
        <td><span *ngIf="crew.EhPIC">PIC</span><span *ngIf="!crew.EhPIC">SIC</span></td>
        <td>{{crew.SIC.Trato}}</td>
        <td *ngFor="let evento of crew.Eventos"><span *ngIf="evento.Tipo == 1">{{evento.Prefixo}}</span> {{evento.PrefixoDeApresentacao}}{{evento.Descricao}}</td>
        
        <td>{{crew.HoraDaSaida}}</td>
        <td>{{crew.LimiteDeCorte | slice:0:5}}</td>
        <td>{{crew.LimiteDeJornada | slice:0:5}}</td>
    </tr>
</table>