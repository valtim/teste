<app-loading *ngIf="loading"></app-loading>
<app-menssage></app-menssage>

<div class="content" style="width: 60%;margin: 60px auto 0 auto;">
  <svg id="salvar" width="32px" height="32px" viewBox="0 0 512 512" (click)="onSaveClick()">
    <g>
      <rect x="248" y="352" width="16" height="96"></rect>
      <path d="M399.3,183.6c0-1.2,0.2-2.4,0.2-3.6c0-64.3-52.8-116.4-116.8-116.4c-46.1,0-85.8,27.1-104.4,66.3
        c-8.1-4.1-17.1-6.4-26.8-6.4c-29.6,0-54.1,23.6-58.9,52C57.4,187.6,32,222.2,32,261.8c0,49.7,40.1,90.2,89.6,90.2H182h31h35V205.8
        l-54.7,54.5l-11.6-11.6l74.5-74.3l74.5,74.3l-11.8,11.6L264,205.8V352h134c45,0,82-37.3,82-82.8C480,223.7,444.5,183.7,399.3,183.6
        z"></path>
    </g>
  </svg>

  <div style="display: flex">
    <select name="prefixoSearch" id="prefixoSearch" [(ngModel)]="prefixoSearch" (change)="onSearchByPrefixo()">
      <option value="">Prefixo</option>
      <option *ngFor="let prefixo of prefixos" [value]="prefixo.Id">
        {{prefixo.PrefixoCompleto}}
      </option>
    </select>
  </div>
  <button (click)="onClickAddBloco()">+</button>
</div>

<div class="content" style="margin-top: 15px">
  <table class="table">
    <thead>
      <tr>
        <th>Deletar</th>
        <th>Prefixo</th>
        <th>NÃºmero</th>
        <th>Folha Inicial</th>
        <th>Folha Final</th>
        <th>Fechado</th>
        <th>Atualizado</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let bloco of blocos; index as i; first as isFirst">
        <td>
          <input type="checkbox" name="Deletar{{i}}" [(ngModel)]="bloco.Deletar" (change)="editBloco(bloco)">
        </td>
        <td>
          <select name="prefixo{{i}}" id="prefixo" [(ngModel)]="bloco.Prefixo.Id" (change)="editBloco(bloco)" required>
            <option *ngFor="let prefixo of prefixos" [value]="prefixo.Id">{{prefixo.PrefixoCompleto}}</option>
          </select>
        </td>
        <td>
          <input type="text" name="numero{{i}}" id="numero" [(ngModel)]="bloco.Numero" (change)="editBloco(bloco)"
            required [textMask]="{mask: numeroMask}">
        </td>
        <td>
          <input type="text" name="folhaInicial{{i}}" id="folhaInicial" [(ngModel)]="bloco.FolhaInicial" (change)="editBloco(bloco)"
            required [textMask]="{mask: folhaMask}">
        </td>
        <td>
          <input type="text" name="folhaFinal{{i}}" id="folhaFinal" [(ngModel)]="bloco.FolhaFinal" (change)="editBloco(bloco)"
            required [textMask]="{mask: folhaMask}">
        </td>
        <td>
          <input type="checkbox" name="fechado{{i}}" id="fechado" [(ngModel)]="bloco.Fechado" (change)="editBloco(bloco)">
        </td>
        <td>
          {{bloco.Atualizacao | date: 'dd/MM/yyyy'}}
        </td>
      </tr>
    </tbody>
  </table>
</div>
