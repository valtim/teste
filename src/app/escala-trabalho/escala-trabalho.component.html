<app-loading *ngIf="loading"></app-loading>
<app-menssage></app-menssage>

<svg id="salvar" width="32px" height="32px" viewBox="0 0 512 512" (click)="save()">
  <g>
    <rect x="248" y="352" width="16" height="96"></rect>
    <path d="M399.3,183.6c0-1.2,0.2-2.4,0.2-3.6c0-64.3-52.8-116.4-116.8-116.4c-46.1,0-85.8,27.1-104.4,66.3
        c-8.1-4.1-17.1-6.4-26.8-6.4c-29.6,0-54.1,23.6-58.9,52C57.4,187.6,32,222.2,32,261.8c0,49.7,40.1,90.2,89.6,90.2H182h31h35V205.8
        l-54.7,54.5l-11.6-11.6l74.5-74.3l74.5,74.3l-11.8,11.6L264,205.8V352h134c45,0,82-37.3,82-82.8C480,223.7,444.5,183.7,399.3,183.6
        z"></path>
  </g>
</svg>

<div class="content">
  <div class="search">
    <input type="date" name="data" [(ngModel)]="data">
    <button class="btn btn-search" (click)="getEscalaRealizada()">
      <img src="assets/icons/search.svg" alt="Search">
    </button>

    <button class="btn btn-new" (click)="novaEscala()">
      +
    </button>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Excluir ?</th>
        <th>Tripulante</th>
        <th>Apresentação</th>
        <th>Almoço</th>
        <th>Fim Almoço</th>
        <th>Tempo de Almoço</th>
        <th>Fim da Jornada</th>
        <th>Tempo de Jornada</th>
        <th>Tempo de Repouso</th>
        <th>H. Voo 30 Dias</th>
        <th>H. Voo 365 Dias</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let e of escalaTrabalhos">
        <td>
          <input type="checkbox" name="excluir" id="{{e.Id}}" (change)="excluir($event)" style="margin: 0 auto">
        </td>
        <td>
          <select name="tripulante" id="{{e.Id}}" [(ngModel)]="e.Tripulante.Id" (change)="addChange($event)">
            <option value="">Tripulante</option>
            <option *ngFor="let tripulante of tripulantes" value="{{tripulante.Id}}">{{tripulante.Trato}}</option>
          </select>
        </td>
        <td>
          <input type="time" name="apresentacao" id="{{e.Id}}" (change)="addChange($event)" [(ngModel)]="e.Apresentacao">
        </td>
        <td>
          <input type="time" name="almoco" id="{{e.Id}}" (change)="addChange($event)" [(ngModel)]="e.Almoco">
        </td>
        <td>
          <input type="time" name="fimAlmoco" id="{{e.Id}}" (change)="addChange($event)" [(ngModel)]="e.FimAlmoco">
        </td>
        <td>
          {{calcTime(e.Almoco, e.FimAlmoco)}}
        </td>
        <td>
          <input type="time" name="fimJornada" id="{{e.Id}}" (change)="addChange($event)" [(ngModel)]="e.FimDaJornada">
        </td>
        <td>
          {{
          setTempoJornada(calcTime(e.Almoco, e.FimAlmoco), e.Apresentacao, e.FimDaJornada)
          }}
        </td>
        <td>{{setTempoRepouso(setTempoJornada(calcTime(e.Almoco, e.FimAlmoco), e.Apresentacao, e.FimDaJornada))}}</td>
        <td>{{e.Tempo30Dias}}</td>
        <td>{{e.Tempo365Dias}}</td>
      </tr>
    </tbody>
  </table>
</div>
