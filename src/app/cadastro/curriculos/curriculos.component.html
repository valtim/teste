<app-titulo titulo="GERENCIAR CURRÍCULOS" [carregando]="carregando"></app-titulo>
<br>
<div class="grid">    
    <div class="col-3">        
        <button type="button" pButton pRipple label="Trato"></button>
        <input pInputText type="text" [(ngModel)]="filtro" (input)="filtrar($event)" placeholder="Trato, ANAC ou Matrícula">
    </div>
    <div class="div-checkbox">
        <input type="checkbox" [(ngModel)]="filtroSemCurriculo" (change)="filtrarCurriculo()">        
        <label>Currículo Incompleto</label>
    </div>        
</div>

<p-toolbar *ngIf="carregando && ((curriculos == null) || (curriculos.length == 0))" class="m-4">
    Carregando...
</p-toolbar>

<div class="tabela" *ngIf="curriculos">

    <p-table [value]="curriculos" [scrollable]="true"
        scrollHeight="83vh" id="" class="tabela">        
        <tr>
            <th></th>
            <th>Trato</th>
            <th>ANAC</th>                                
            <th>Matrícula</th>
            <th>Matrícula TOTVS</th>           
            <th>Currículo</th>
        </tr>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr>
                <td><input type="checkbox" (change)="marcarCheckboxCurriculo($event,rowData)"></td>
                <td (click)="exibirDialogoEdicao(rowData)">{{rowData.Tripulante.Trato}}</td>
                <td (click)="exibirDialogoEdicao(rowData)">{{rowData.Tripulante.CodigoANAC}}</td>                
                <td (click)="exibirDialogoEdicao(rowData)">{{rowData.Tripulante.Matricula}}</td>
                <td (click)="exibirDialogoEdicao(rowData)">{{rowData.Tripulante.MatriculaInterna}}</td>                                             
                <td (click)="exibirDialogoEdicao(rowData)">{{rowData.CurriculoIncompleto ? "Incompleto" : "Completo"}}</td>                
            </tr>
        </ng-template>
    </p-table>

</div>

<p-dialog [style]="{'width':'95%', 'height':'95%'}" *ngIf="exibirEdicao" header="EDITAR CURRÍCULO" [(visible)]="exibirEdicao" [modal]="true" [baseZIndex]="10000" (onHide)="ocultarDialogoEdicao()">
    <app-editar-curriculo [curriculoSelecionado]="curriculoSelecionado" (retorno)="ocultarDialogoEdicao()">
    </app-editar-curriculo>
</p-dialog>